
 pipeline {
    agent any 
    tools {
        maven 'maven3.8.5'
    }
    stages {
        stage('Stage 1') {
            steps {
                echo 'Hello world!' 
            }
        }
        stage('Checkout') { 
            steps {
              git branch: 'master', credentialsId: 'c75f4dce-eaa5-4c6a-831f-9c5f15732c58', url: 'git@gitlab.direa.synology.me:cruzapim-k8s/authserver.git'
            }
        }
        stage ('Build'){
          steps {
             sh 'mvn clean package -Dcheckstyle.skip -Dspotbugs.skip -Dpmd.skip -DskipTests'
          }
          //sh "mvn -v"
          //sh "mvn clean"
          //sh "mvn build"
        }
        /* stage("Build") {
            steps {
                withMaven(mavenSettingsConfig: 'Maven_config') {
                    sh "echo Build"
                    sh "mvn clean package -Dmaven.test.skip=true"
                }
            }
        } */

        /*stage("Delivery To Nexus") {
            steps {
                //withMaven(mavenSettingsConfig: 'Maven_config') {
                    sh "mvn deploy -Dmaven.test.skip=true"
                    sh "echo Delivery"
                //}
            }
        }*/

    }
}
