pipeline{
  
  agent any  
      // JDK 8 사용하도록 설정하기
      //stage 'Setting'
      //def javaHome = tool name: 'jdk8', type: 'hudson.model.JDK'
      //env.JAVA_HOME = "${javaHome}"
      //env.PATH = "${env.PATH}:${env.JAVA_HOME}/bin"
      tools{
          jdk('jdk1.8')
          maven('maven3.8.5')
      }
      stages{
        //stage('Checkout') { 
        //    git branch: 'master', credentialsId: 'c75f4dce-eaa5-4c6a-831f-9c5f15732c58', url: 'git@gitlab.direa.synology.me:cruzapim-k8s/authserver.git'
        //}
        stage('Build') {
         steps {
            // Get some code from a GitHub repository
            git(
                url : 'git@gitlab.direa.synology.me:cruzapim-k8s/authserver.git',
                credentialsId: 'c75f4dce-eaa5-4c6a-831f-9c5f15732c58',
                branch: 'master'
            )

            // yarn install & build
            sh "mvn clean"
            sh "mvn build"
         }
        stage ('Build'){
          steps{
            script{
              sh "java -version"
              sh "mvn -v"
            }
          }
        }
        stage('Test') { 
            // 
        }
        stage('Deploy') { 
            // 
        }
      }
  }

